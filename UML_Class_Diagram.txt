UML Class Diagram for Vehicle Rental System (Updated)
========================================================

┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    VEHICLE RENTAL SYSTEM                                       │
│                                        CLASS DIAGRAM                                           │
│                                      (Latest Version)                                          │
└─────────────────────────────────────────────────────────────────────────────────────────────┘

┌───────────────────────────────┐                    ┌──────────────────────────────────┐
│          <<abstract>>         │                    │           <<interface>>          │
│            Person             │                    │            Rentable              │
├───────────────────────────────┤                    ├──────────────────────────────────┤
│ # id: String                  │                    │ + isAvailable(): boolean         │
│ # name: String                │                    │ + setAvailable(boolean): void    │
│ # email: String               │                    │ + getDailyRate(): double         │
│ # phone: String               │                    │ + getRentalInfo(): String        │
│ # isLoggedIn: boolean         │                    │ + performMaintenance(): void     │
├───────────────────────────────┤                    │ + getMaintenanceStatus(): enum   │
│ + Person(String,String,...)   │                    └──────────────────────────────────┘
│ + login(String,String): bool  │                               △
│ + logout(): void              │                               │
│ + getRole(): String          │                               │ implements
│ + hasPermission(String): bool │                               │
│ + authenticate(): boolean     │                               │
│ + onLoginSuccess(): void      │    ┌──────────────────────────────────────────────────┐
│ + onLogout(): void           │    │                <<abstract>>                      │
└───────────────────────────────┘    │                 Vehicle                          │
         △                           ├──────────────────────────────────────────────────┤
         │                           │ - vehicleId: String                              │
         │ extends                   │ - model: String                                  │
         │                           │ - available: boolean                             │
┌────────┴────────┐                  │ - dailyRate: double                              │
│                 │                  │ - passengerCapacity: int                         │
│                 │                  │ - maintenanceStatus: MaintenanceStatus          │
│                 │                  │ - lastMaintenanceDate: LocalDate                 │
│                 │                  │ - totalRentals: int                              │
│                 │                  ├──────────────────────────────────────────────────┤
│                 │                  │ + Vehicle(String,String,double,int)              │
│                 │                  │ + getVehicleId(): String                         │
│                 │                  │ + getModel(): String                             │
│                 │                  │ + getDailyRate(): double                         │
│                 │                  │ + setDailyRate(double): void                     │
│                 │                  │ + isAvailable(): boolean                         │
│                 │                  │ + setAvailable(boolean): void                    │
│                 │                  │ + getPassengerCapacity(): int                    │
│                 │                  │ + performMaintenance(): void                     │
│                 │                  │ + getRentalInfo(): String                        │
│                 │                  │ + getTotalRentals(): int                         │
│                 │                  │ + getType(): String {abstract}                   │
│                 │                  │ + getSpecialFeatures(): String {abstract}       │
│                 │                  └──────────────────────────────────────────────────┘
│                 │                                     △
│                 │                                     │
│                 │                                     │ extends
│                 │                      ┌──────────────┴─────────────┐
│                 │                      │                            │
│                 │              ┌───────────────┐            ┌───────────────┐
│                 │              │      Car      │            │      Van      │
│                 │              ├───────────────┤            ├───────────────┤
│                 │              │ - carType: CarType         │ - luggageSpace: int│
│                 │              │ - hasGPS: boolean          │ - vanType: VanType │
│                 │              │ - hasAirCon: boolean       │ - hasWifi: boolean │
│                 │              ├───────────────┤            │ - hasTV: boolean   │
│                 │              │ + Car(...)    │            ├───────────────┤
│                 │              │ + getType(): String        │ + Van(...)    │
│                 │              │ + getSpecialFeatures()     │ + getType(): String│
│                 │              │ + getCarType(): CarType    │ + getSpecialFeatures()│
│                 │              │ + hasGPS(): boolean        │ + getLuggageSpace(): int│
│                 │              │ + hasAirCon(): boolean     │ + getVanType(): VanType│
│                 │              └───────────────┘            │ + hasWifi(): boolean│
│                 │                                           │ + hasTV(): boolean │
│                 │                                           └───────────────┘
│                 │              
├─────────────────┼─────────────────────┐
│                 │                     │
│                 │                     │
▼                 ▼                     ▼
┌─────────────────────────┐   ┌─────────────────────────┐
│        Customer         │   │         Admin           │
├─────────────────────────┤   ├─────────────────────────┤
│ - password: String      │   │ - password: String      │
│ - totalRentals: int     │   │ - level: AdminLevel     │
│ - totalSpent: double    │   │ - actionsPerformed: int │
│ - tier: CustomerTier    │   ├─────────────────────────┤
├─────────────────────────┤   │ + Admin(...)            │
│ + Customer(...)         │   │ + getRole(): String     │
│ + getRole(): String     │   │ + hasPermission(): bool │
│ + hasPermission(): bool │   │ + authenticate(): bool  │
│ + authenticate(): bool  │   │ + onLoginSuccess(): void│
│ + onLoginSuccess(): void│   │ + onLogout(): void      │
│ + onLogout(): void      │   │ + recordAction(): void  │
│ + addRental(double)     │   │ + canPerformAction(): bool│
│ + getLoyaltyDiscount()  │   │ + getAdminId(): String  │
│ + getTier(): CustomerTier│   │ + getLevel(): AdminLevel│
│ + getCustomerId(): String│   └─────────────────────────┘
│ + getTotalRentals(): int│
│ + getTotalSpent(): double│
└─────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                    ENUMERATIONS                                        │
├─────────────────────────────────────────────────────────────────────────────────────┤
│ CustomerTier: BRONZE(0 rentals, 0% discount), SILVER(5 rentals, 5% discount),        │
│               GOLD(15 rentals, 10% discount), PLATINUM(30 rentals, 15% discount)     │
│ AdminLevel: JUNIOR, SENIOR, MANAGER, SUPERVISOR                                       │
│ CarType: ECONOMY, COMPACT, MIDSIZE, LUXURY                                            │
│ VanType: STANDARD, LUXURY, EXECUTIVE                                                  │
│ MaintenanceStatus: EXCELLENT, GOOD, FAIR, POOR, OUT_OF_SERVICE                       │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────┐
│                   Booking                      │
├────────────────────────────────────────────────┤
│ - bookingId: String                            │
│ - customer: Customer                           │
│ - vehicle: Vehicle                             │
│ - startDate: LocalDate                         │
│ - durationDays: int                            │
│ - returned: boolean                            │
│ - appliedGroupPromotion: Promotion             │
│ - appliedLongTermPromotion: Promotion          │
│ - finalCharge: double                          │
├────────────────────────────────────────────────┤
│ + Booking(String,Customer,Vehicle,...)         │
│ + getBookingId(): String                       │
│ + getCustomer(): Customer                      │
│ + getVehicle(): Vehicle                        │
│ + isReturned(): boolean                        │
│ + getDurationDays(): int                       │
│ + calculateCharge(): double                    │
│ + returnVehicle(): void                        │
│ + getAppliedGroupPromotion(): Promotion       │
│ + getAppliedLongTermPromotion(): Promotion    │
│ - calculateFinalCharge(): void                 │
│ + detailed(): String                           │
│ + toString(): String                           │
└────────────────────────────────────────────────┘
            │                    │
            │ uses               │ uses
            ▼                    ▼
┌────────────────────────────────────────────────┐
│                 Promotion                      │
├────────────────────────────────────────────────┤
│ - code: String                                 │
│ - type: String                                 │
│ - description: String                          │
│ - discountPercentage: double                   │
│ - threshold: int                               │
│ - active: boolean                              │
├────────────────────────────────────────────────┤
│ + Promotion(String,String,String,double,int)   │
│ + getCode(): String                            │
│ + getType(): String                            │
│ + getDescription(): String                     │
│ + getDiscountPercentage(): double              │
│ + getThreshold(): int                          │
│ + isActive(): boolean                          │
│ + setActive(boolean): void                     │
│ + formatThreshold(): String                    │
└────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                  RentalService                                         │
├─────────────────────────────────────────────────────────────────────────────────────┤
│ - vehicles: DynamicArray<Vehicle>                                                      │
│ - customers: DynamicArray<Customer>                                                    │
│ - admins: DynamicArray<Admin>                                                         │
│ - bookings: DynamicArray<Booking>                                                     │
│ - promotions: DynamicArray<Promotion>                                                 │
│ - reportGenerator: ReportGenerator                                                     │
├─────────────────────────────────────────────────────────────────────────────────────┤
│ + RentalService()                                                                      │
│ + addVehicle(Vehicle): void                                                           │
│ + deleteVehicle(String): boolean                  ⭐ NEW                              │
│ + getVehicles(): List<Vehicle>                                                        │
│ + getAvailableVehicles(): List<Vehicle>                                              │
│ + addCustomer(Customer): void                                                         │
│ + getCustomers(): List<Customer>                                                      │
│ + loginCustomer(String,String): Customer                                             │
│ + addAdmin(Admin): void                                                               │
│ + findAdminByEmail(String): Admin                                                     │
│ + rentVehicle(Customer,Vehicle,int,int): Booking                                     │
│ + returnVehicle(String): void                                                         │
│ + getBookings(): List<Booking>                                                        │
│ + getBookingsByCustomer(Customer): List<Booking>                                     │
│ + addPromotion(Promotion): void                                                       │
│ + getAllPromotions(): List<Promotion>                                                 │
│ + getActivePromotions(): List<Promotion>                                             │
│ + activatePromotion(String): void                                                     │
│ + deactivatePromotion(String): void                                                   │
│ + nextCustomerId(): String                                                            │
│ + nextVehicleId(): String                                                             │
│ + nextBookingId(): String                                                             │
│ + nextPromotionCode(): String                                                         │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │ uses
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              ReportGenerator                                           │
├─────────────────────────────────────────────────────────────────────────────────────┤
│ - rentalService: RentalService                                                         │
│ - dateFormatter: DateTimeFormatter                                                     │
├─────────────────────────────────────────────────────────────────────────────────────┤
│ + ReportGenerator(RentalService)                                                       │
│ + generateComprehensiveReport(): void                                                  │
│ + generateVehiclePerformanceReport(): void                                            │
│ - generateFleetAnalysis(): void                                                        │
│ - generateCustomerAnalysis(): void                                                     │
│ - generateRevenueAnalysis(): void                                                      │
│ - generatePromotionEffectiveness(): void                                              │
│ - calculateTotalDiscount(Booking): double                                             │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                             DynamicArray<T>                                            │
├─────────────────────────────────────────────────────────────────────────────────────┤
│ - elements: Object[]                                                                   │
│ - size: int                                                                            │
│ - capacity: int                                                                        │
├─────────────────────────────────────────────────────────────────────────────────────┤
│ + DynamicArray()                                                                       │
│ + DynamicArray(int)                                                                    │
│ + add(T): void                                                                         │
│ + add(int,T): void                                                                     │
│ + get(int): T                                                                          │
│ + set(int,T): T                                                                        │
│ + remove(int): T                                                                       │
│ + remove(T): boolean                                                                   │
│ + indexOf(T): int                                                                      │
│ + contains(T): boolean                                                                 │
│ + size(): int                                                                          │
│ + isEmpty(): boolean                                                                   │
│ + clear(): void                                                                        │
│ + filter(Predicate<T>): DynamicArray<T>                                              │
│ + toList(): List<T>                                                                    │
│ + iterator(): Iterator<T>                                                              │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                               ConsoleUI                                                │
├─────────────────────────────────────────────────────────────────────────────────────┤
│ - service: RentalService                                                               │
│ - sc: Scanner                                                                          │
│ - currentCustomer: Customer                                                            │
├─────────────────────────────────────────────────────────────────────────────────────┤
│ + ConsoleUI(RentalService)                                                             │
│ + start(): void                                                                        │
│ - customerLogin(): void                                                                │
│ - customerMainMenu(): void                                                             │
│ - adminLogin(): void                                                                   │
│ - adminMainMenu(Admin): void                                                           │
│ - displayAvailableVehicles(): void                                                     │
│ - rentVehicle(): void                                                                  │
│ - returnVehicle(): void                                                                │
│ - viewProfile(): void                           ⭐ UPDATED (shows tier info)           │
│ - generateReports(): void                                                              │
│ - addVehicle(): void                                                                   │
│ - deleteVehicle(): void                         ⭐ NEW                                 │
│ - setPromotions(): void                                                                │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                            EXCEPTION HIERARCHY                                         │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                           RentalSystemException                                        │
│                                    △                                                   │
│                                    │                                                   │
│          ┌─────────────────────────┼─────────────────────────┐                      │
│          │                         │                         │                      │
│    VehicleException        CustomerException        BookingException                 │
│          △                         △                         △                      │
│          │                         │                         │                      │
│  ┌───────┴────────┐        ┌───────┴────────┐        ┌───────┴────────┐            │
│  │                │        │                │        │                │            │
│VehicleNotAvailable│  InvalidCredentials│    BookingNotFound│                        │
│Exception           │  Exception         │    Exception      │                        │
│                    │                    │                   │                        │
│VehicleMainte-      │  CustomerNotLogged-│    BookingAlready-│                       │
│nanceException      │  InException       │    ReturnedException                       │
└─────────────────────────────────────────────────────────────────────────────────────┘

MAJOR UPDATES IN THIS VERSION:
===============================

⭐ LOYALTY DISCOUNT SYSTEM:
- Customer loyalty discount now properly applies to final booking amount
- Discount stacking: Group + Long-term + Loyalty discounts can all apply
- Enhanced booking details show all applied discounts and total savings
- CustomerTier enum includes discount percentages for each tier

⭐ ENHANCED ADMIN FUNCTIONALITY:
- New deleteVehicle() method in RentalService with safety checks
- Updated admin menu with "Delete Vehicle" option
- Vehicle deletion prevents removal of vehicles with active bookings
- Confirmation dialog for vehicle deletion

⭐ IMPROVED CUSTOMER EXPERIENCE:
- viewProfile() now displays member tier, total rentals, spent amount, and discount rate
- Real-time customer statistics update when making bookings
- Customer.addRental() automatically called when booking is created

⭐ ENHANCED BOOKING SYSTEM:
- calculateFinalCharge() method applies all discount types in sequence
- Booking details show comprehensive discount breakdown
- Improved toString() method displays loyalty discount information

⭐ UPDATED RELATIONSHIPS:
- Booking class has enhanced relationship with Customer for loyalty discounts
- RentalService.rentVehicle() now updates customer statistics immediately
- Admin has new delete permissions for vehicle management

RELATIONSHIPS:
==============
1. Inheritance (extends): Person → Customer, Admin
                         Vehicle → Car, Van

2. Implementation (implements): Vehicle implements Rentable

3. Composition (has-a): RentalService has DynamicArray<Vehicle>, DynamicArray<Customer>, etc.
                       Booking has Customer, Vehicle, Promotion

4. Association (uses): ReportGenerator uses RentalService
                      ConsoleUI uses RentalService
                      Booking uses Customer for loyalty calculations
                      
5. Dependency: All classes depend on ValidationUtil for input validation

DISCOUNT CALCULATION FLOW:
=========================
1. Base Charge = duration × dailyRate
2. Apply Group Promotion discount (if applicable)
3. Apply Long-term Promotion discount (if applicable) 
4. Apply Customer Loyalty discount (based on tier)
5. Final Charge = Base Charge after all discounts
